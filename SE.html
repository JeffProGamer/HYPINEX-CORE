<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HYPINEX — AI Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#050505;
  --panel:#0e0e0e;
  --border:#2a2a2a;
  --text:#e5e5e5;
  --accent:#3a3a3a;
}
*{box-sizing:border-box;font-family:system-ui,Arial}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  display:flex;
  flex-direction:column;
  height:100vh;
}

/* ===== TOP ===== */
header{
  padding:14px 20px;
  border-bottom:1px solid var(--border);
  font-weight:bold;
  letter-spacing:2px;
}

/* ===== MAIN ===== */
main{
  flex:1;
  display:flex;
  gap:14px;
  padding:14px;
}

/* ===== INPUT ===== */
#left{
  width:320px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
textarea{
  flex:1;
  background:var(--panel);
  border:1px solid var(--border);
  color:var(--text);
  padding:12px;
  border-radius:12px;
  resize:none;
}
select,button{
  background:#111;
  border:1px solid var(--border);
  color:var(--text);
  padding:10px;
  border-radius:12px;
  cursor:pointer;
}

/* ===== OUTPUT ===== */
#right{
  flex:1;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:14px;
  display:flex;
  flex-direction:column;
}
#tabs{
  display:flex;
  border-bottom:1px solid var(--border);
}
#tabs button{
  flex:1;
  border:none;
  background:#0b0b0b;
}
#tabs button.active{
  background:var(--accent);
}
.output{
  flex:1;
  padding:14px;
  overflow:auto;
  display:none;
}
.output.active{display:block}
pre{
  background:#050505;
  padding:12px;
  border-radius:10px;
  overflow:auto;
}
img{max-width:100%;border-radius:12px}
</style>
</head>
<body>

<header>HYPINEX</header>

<main>
  <!-- INPUT -->
  <div id="left">
    <textarea id="prompt" placeholder="Ask anything… scripts, explanations, images (SFW)"></textarea>
    <select id="mode">
      <option value="chat">Answer</option>
      <option value="script">Script</option>
      <option value="image">Image (SFW)</option>
    </select>
    <button onclick="send()">Send</button>
  </div>

  <!-- OUTPUT -->
  <div id="right">
    <div id="tabs">
      <button onclick="show('answer')" class="active">Answer</button>
      <button onclick="show('code')">Code</button>
      <button onclick="show('image')">Image</button>
    </div>

    <div id="answer" class="output active"></div>
    <div id="code" class="output"><pre></pre></div>
    <div id="image" class="output"></div>
  </div>
</main>

<script>
const promptEl = document.getElementById("prompt");
const modeEl = document.getElementById("mode");

function show(tab){
  document.querySelectorAll(".output").forEach(o=>o.classList.remove("active"));
  document.querySelectorAll("#tabs button").forEach(b=>b.classList.remove("active"));
  document.getElementById(tab).classList.add("active");
  [...document.querySelectorAll("#tabs button")]
    .find(b=>b.textContent.toLowerCase()===tab)
    .classList.add("active");
}

async function send(){
  const prompt = promptEl.value.trim();
  if(!prompt) return;

  const mode = modeEl.value;
  let url = "/api/ai/chat";
  if(mode==="script") url="/api/ai/script";
  if(mode==="image") url="/api/ai/image";

  const res = await fetch(url,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ prompt })
  });

  const data = await res.json();

  if(mode==="chat"){
    show("answer");
    document.getElementById("answer").textContent = data.answer || JSON.stringify(data);
  }

  if(mode==="script"){
    show("code");
    document.querySelector("#code pre").textContent = data.code || "No code returned";
  }

  if(mode==="image"){
    show("image");
    const img=document.createElement("img");
    img.alt="AI image placeholder";
    img.src="data:image/svg+xml;base64,"+btoa(
      `<svg xmlns='http://www.w3.org/2000/svg' width='400' height='300'>
        <rect width='100%' height='100%' fill='#111'/>
        <text x='50%' y='50%' fill='#aaa' text-anchor='middle'>Image request sent</text>
      </svg>`
    );
    document.getElementById("image").innerHTML="";
    document.getElementById("image").appendChild(img);
  }
}
</script>
</body>
</html>
